<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - PulsePoint</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="admin.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="admin-container">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="logo">
                <span class="plus-sign">+</span>PulsePoint
            </div>
            <ul class="nav-links">
                <li class="active" data-tab="dashboard">
                    <i class="fas fa-chart-line"></i>
                    <span>Dashboard</span>
                </li>
                <li data-tab="appointments">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Appointments</span>
                </li>
                <li data-tab="patients">
                    <i class="fas fa-users"></i>
                    <span>Patients</span>
                </li>
                <li data-tab="doctors">
                    <i class="fas fa-user-md"></i>
                    <span>Doctors</span>
                </li>
                <li data-tab="beds">
                    <i class="fas fa-bed"></i>
                    <span>Beds</span>
                </li>
                <li data-tab="departments">
                    <i class="fas fa-hospital"></i>
                    <span>Departments</span>
                </li>
            </ul>
            <div class="sidebar-footer">
                <a href="index.html" class="home-link">
                    <i class="fas fa-home"></i>
                    <span>Back to Home</span>
                </a>
                <button class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </button>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Bar -->
            <div class="top-bar">
                <div class="search-bar">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search...">
                </div>
                <div class="admin-profile">
                    <span class="admin-name">Admin User</span>
                    <div class="settings-icon">
                        <i class="fas fa-cog"></i>
                    </div>
                </div>
            </div>

            <!-- Dashboard Section -->
            <section id="dashboard" class="content-section active">
                <h1>Dashboard Overview</h1>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Total Appointments</h3>
                            <p id="totalAppointments">4</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Total Patients</h3>
                            <p id="totalPatients">4</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-user-md"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Total Doctors</h3>
                            <p id="totalDoctors">17</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-bed"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Available Beds</h3>
                            <p id="availableBeds">24</p>
                        </div>
                    </div>
                </div>

                <div class="recent-activity-section">
                    <h2>Recent Activity</h2>
                    <div class="activity-list" id="recentActivity">
                        <!-- Activity items will be populated by JavaScript -->
                    </div>
                </div>
            </section>

            <!-- Appointments Section -->
            <section id="appointments" class="content-section">
                <h1>Appointments Management</h1>
                <div class="filters-section">
                    <div class="date-filter">
                        <label for="dateRange">View Appointments:</label>
                        <select id="dateRange" class="date-select">
                            <option value="past">Past Appointments</option>
                            <option value="today">Today's Appointments</option>
                            <option value="week" selected>Next 7 Days</option>
                            <option value="month">Next 30 Days</option>
                            <option value="all">All Appointments</option>
                        </select>
                    </div>
                    <div class="search-filter">
                        <input type="text" id="searchInput" placeholder="Search appointments...">
                        <i class="fas fa-search"></i>
                    </div>
                </div>
                <div class="table-container">
                    <!-- Appointments table will be populated by JavaScript -->
                </div>
            </section>

            <!-- Patients Section -->
            <section id="patients" class="content-section">
                <h1>Patient Records</h1>
                <div class="filters-section">
                    <div class="search-filter">
                        <input type="text" id="patientSearch" placeholder="Search patients...">
                        <i class="fas fa-search"></i>
                    </div>
                    <div style="display: flex; gap: 8px;">
                        <button class="add-btn" onclick="document.getElementById('new-patient-modal').style.display='block'">
                            <i class="fas fa-plus"></i>
                            Add New Patient
                        </button>
                        <button class="btn" onclick="refreshPatientsData()">
                            <i class="fas fa-sync-alt"></i>
                            Refresh
                        </button>
                    </div>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Contact</th>
                                <th>Email</th>
                                <th>Gender</th>
                                <th>Last Visit</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="patientsTableBody">
                            <!-- Patient records will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Doctors Section -->
            <section id="doctors" class="content-section">
                <h1>Doctors Management</h1>
                <div class="filters-section">
                    <div class="search-filter">
                        <input type="text" id="doctorSearch" placeholder="Search doctors...">
                        <i class="fas fa-search"></i>
                    </div>
                    <button class="add-btn">
                        <i class="fas fa-plus"></i>
                        Add New Doctor
                    </button>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Department</th>
                                <th>Contact</th>
                                <th>Email</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="doctorsTableBody">
                            <!-- Doctor records will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Departments Section -->
            <section id="departments" class="content-section">
                <h1>Departments Management</h1>
                <div class="filters-section">
                    <button class="add-btn">
                        <i class="fas fa-plus"></i>
                        Add New Department
                    </button>
                </div>
                <div class="departments-grid">
                    <!-- Departments will be populated by JavaScript -->
                </div>
            </section>

            <!-- Beds Section -->
            <section id="beds" class="content-section">
                <h1>Hospital Bed Management</h1>
                
                <!-- Bed Stats Overview -->
                <div class="bed-stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-bed"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Total Beds</h3>
                            <p id="totalBeds">50</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon bed-occupied">
                            <i class="fas fa-procedures"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Occupied Beds</h3>
                            <p id="occupiedBeds">26</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon bed-vacant">
                            <i class="fas fa-bed"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Vacant Beds</h3>
                            <p id="vacantBeds">24</p>
                        </div>
                    </div>
                </div>
                
                <!-- Bed Visualization & Types Section -->
                <div class="bed-content-grid">
                    <div class="bed-chart-container">
                        <h2>Bed Occupancy by Type</h2>
                        <div class="bed-chart">
                            <canvas id="bedOccupancyChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="bed-types-container">
                        <h2>Bed Types</h2>
                        <div class="bed-types-grid" id="bedTypesGrid">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
                
                <!-- Bed Inventory & Assignments Tabs -->
                <div class="beds-tabs-container">
                    <div class="beds-tabs">
                        <button class="beds-tab-btn active" data-tab="bedInventory">Bed Inventory</button>
                        <button class="beds-tab-btn" data-tab="bedAssignments">Bed Assignments</button>
                    </div>
                    
                    <div class="beds-tab-content">
                        <!-- Bed Inventory Tab -->
                        <div id="bedInventory" class="beds-tab-pane active">
                            <div class="filters-section">
                                <div class="filter-group">
                                    <label for="bedTypeFilter">Filter by Type:</label>
                                    <select id="bedTypeFilter">
                                        <option value="">All Types</option>
                                        <!-- Will be populated by JavaScript -->
                                    </select>
                                </div>
                                <div class="search-filter">
                                    <input type="text" id="bedSearch" placeholder="Search beds...">
                                    <i class="fas fa-search"></i>
                                </div>
                                <div class="beds-action-buttons">
                                    <button id="add-bed-btn" class="btn btn-primary" onclick="document.getElementById('new-bed-modal').style.display='block'">
                                        <span class="btn-icon">+</span> Add New Bed
                                    </button>
                                    <button id="refresh-beds-btn" class="btn">Refresh Data</button>
                                </div>
                            </div>
                            
                            <div class="table-container">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Bed ID</th>
                                            <th>Hospital</th>
                                            <th>Bed Type</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="bedInventoryTableBody">
                                        <!-- Will be populated by JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Bed Assignments Tab -->
                        <div id="bedAssignments" class="beds-tab-pane">
                            <div class="filters-section">
                                <div class="filter-group">
                                    <label for="assignmentStatusFilter">Filter by Status:</label>
                                    <select id="assignmentStatusFilter">
                                        <option value="">All Assignments</option>
                                        <option value="current">Current Patients</option>
                                        <option value="discharged">Discharged Patients</option>
                                    </select>
                                </div>
                                <div class="search-filter">
                                    <input type="text" id="assignmentSearch" placeholder="Search assignments...">
                                    <i class="fas fa-search"></i>
                                </div>
                                <div style="display: flex; gap: 8px;">
                                    <button class="add-btn" onclick="openBedAssignmentModal()">
                                        <i class="fas fa-plus"></i>
                                        New Assignment
                                    </button>
                                    <button class="cancel-btn" onclick="clearAllAssignments()" title="Clear all bed assignments">
                                        <i class="fas fa-trash"></i>
                                        Clear All
                                    </button>
                                </div>
                            </div>
                            
                            <div class="table-container">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Assignment ID</th>
                                            <th>Bed ID</th>
                                            <th>Patient</th>
                                            <th>Bed Type</th>
                                            <th>Admission Date</th>
                                            <th>Discharge Date</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="bedAssignmentsTableBody">
                                        <!-- Will be populated by JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal for Bed Assignment -->
    <div id="bedAssignmentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Assign Bed to Patient</h3>
                <span class="close" onclick="closeBedAssignmentModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div id="assignmentErrorMessage" class="error-message" style="display: none;"></div>
                
                <!-- Patient Selection Area -->
                <div id="patientSelectArea">
                    <div class="form-group">
                        <label for="patientSelect" class="required">Patient</label>
                        <div class="select-with-action">
                            <select id="patientSelect" required>
                                <option value="">Select Patient</option>
                            </select>
                           
                        </div>
                       
                    </div>
                </div>
                
                <!-- New Patient Form - Initially Hidden -->
                <div id="newPatientForm" style="display: none;">
                    <h4>Add New Patient</h4>
                    <div class="form-group">
                        <label for="newPatientName" class="required">Full Name</label>
                        <input type="text" id="newPatientName" placeholder="Enter patient full name" required>
                    </div>
                    <div class="form-group">
                        <label for="newPatientPhone" class="required">Contact Number</label>
                        <div class="phone-input-container">
                            <select id="newPatientCountryCode" name="newPatientCountryCode">
                                <option value="+91">India (+91)</option>
                                <option value="+1">USA (+1)</option>
                                <option value="+44">UK (+44)</option>
                                <option value="+61">Australia (+61)</option>
                                <option value="+86">China (+86)</option>
                                <option value="+49">Germany (+49)</option>
                                <option value="+33">France (+33)</option>
                                <option value="+81">Japan (+81)</option>
                                <option value="+7">Russia (+7)</option>
                                <option value="+971">UAE (+971)</option>
                            </select>
                            <input type="tel" id="newPatientPhone" placeholder="Enter contact number" pattern="[0-9]{10}" maxlength="10" title="Please enter exactly 10 digits" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="newPatientEmail">Email</label>
                        <input type="email" id="newPatientEmail" placeholder="Enter email address">
                    </div>
                    <div class="form-group">
                        <label for="newPatientGender" class="required">Gender</label>
                        <select id="newPatientGender" required>
                            <option value="">Select Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button type="button" id="cancelNewPatient">Cancel</button>
                        <button type="button" onclick="createNewPatient()">Create Patient</button>
                    </div>
                </div>
                
                <form id="bedAssignmentForm">
                    <div id="bedSelectionArea">
                        <div class="form-group">
                            <label for="bedSelect" class="required">Available Bed</label>
                            <select id="bedSelect" required>
                                <option value="">Select Bed</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="admissionDate" class="required">Admission Date</label>
                            <input type="date" id="admissionDate" required>
                        </div>
                        <div class="form-group">
                            <label for="dischargeDate">Expected Discharge Date (Optional)</label>
                            <input type="date" id="dischargeDate">
                        </div>
                        <div class="form-group">
                            <label for="assignmentNotes">Notes</label>
                            <textarea id="assignmentNotes" rows="3" placeholder="Enter any relevant notes about this assignment"></textarea>
                        </div>
                        <div class="form-actions">
                            <button type="button" onclick="closeBedAssignmentModal()">Cancel</button>
                            <button type="submit">Assign Bed</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- New Bed Modal -->
    <div id="new-bed-modal" class="modal" style="background-color: rgba(0, 0, 0, 0.5); z-index: 9999;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Bed</h2>
                <span class="close" onclick="document.getElementById('new-bed-modal').style.display='none'">&times;</span>
            </div>
            <div class="modal-body">
                <form id="new-bed-form" onsubmit="return submitNewBed(event);">
                    <div class="form-group">
                        <label for="bed-type">Bed Type:</label>
                        <select id="bed-type" name="bed-type" required>
                            <option value="">Select Bed Type</option>
                            <option value="General">General</option>
                            <option value="ICU">ICU</option>
                            <option value="Pediatric">Pediatric</option>
                            <option value="Private">Private</option>
                            <option value="Semi-Private">Semi-Private</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="hospital-id">Hospital:</label>
                        <select id="hospital-id" name="hospital-id" required>
                            <option value="">Select Hospital</option>
                            <option value="1">123 Main Rd</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="bed-status">Bed Status:</label>
                        <select id="bed-status" name="bed-status" required>
                            <option value="available" selected>Available</option>
                            <option value="occupied">Occupied</option>
                            <option value="maintenance">Maintenance</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <button type="submit" class="btn btn-primary">Add Bed</button>
                        <button type="button" id="cancel-bed-btn" class="btn" onclick="document.getElementById('new-bed-modal').style.display='none'">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

   

    <!-- New Patient Modal -->
    <div id="new-patient-modal" class="modal" style="background-color: rgba(0, 0, 0, 0.5); z-index: 9999;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Patient</h2>
                <span class="close" onclick="document.getElementById('new-patient-modal').style.display='none'">&times;</span>
            </div>
            <div class="modal-body">
                <form id="new-patient-form" onsubmit="return submitNewPatient(event);">
                    <div class="form-group">
                        <label for="patient-name">Full Name:</label>
                        <input type="text" id="patient-name" name="patient-name" required>
                    </div>
                    <div class="form-group">
                        <label for="patient-contact">Contact Number:</label>
                        <div class="phone-input-container">
                            <select id="country-code" name="country-code">
                                <option value="+91">India (+91)</option>
                                <option value="+1">USA (+1)</option>
                                <option value="+44">UK (+44)</option>
                                <option value="+61">Australia (+61)</option>
                                <option value="+86">China (+86)</option>
                                <option value="+49">Germany (+49)</option>
                                <option value="+33">France (+33)</option>
                                <option value="+81">Japan (+81)</option>
                                <option value="+7">Russia (+7)</option>
                                <option value="+971">UAE (+971)</option>
                            </select>
                            <input type="text" id="patient-contact" name="patient-contact" pattern="[0-9]{10}" title="Please enter exactly 10 digits" maxlength="10" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="patient-email">Email:</label>
                        <input type="email" id="patient-email" name="patient-email">
                    </div>
                    <div class="form-group">
                        <label for="patient-gender">Gender:</label>
                        <select id="patient-gender" name="patient-gender" required>
                            <option value="">Select Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <button type="submit" class="btn btn-primary">Add Patient</button>
                        <button type="button" class="btn" onclick="document.getElementById('new-patient-modal').style.display='none'">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="admin.js"></script>
</body>
</html> 